<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>智能问答</title>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no, email=no"/>
		<link rel="stylesheet" href="../../css/iuapmobile.um.css">
		<link rel="stylesheet" href="../../css/common.css"/>
		<link rel="stylesheet" href="./robot.css"/>
	</head>
	<body>
		<!--列表类型-->
	    <script id="multiSelectTmpl" type="text/x-dot-template">
	        <div class="chat-item-text ">
	        	{{if(it.numFound == 0){}}
	        	<div class="multiSelect-header">很抱歉，未找到搜索结果，建议您重新输入关键词</div>
	        	{{ }else{ }}
	            <div class="multiSelect-header">为您找到以下数据</div>
	            <div class="multiSelect-content-box">
	                {{~it.docs :value:index}}
	                <div class="multiSelect-content-item um-text-overflow"
	                     onclick="clickResponseUrl('{{= value.url}}')">
	                    {{=index+1}}.{{=value.title}}
	                </div>
	                {{~}}
	            </div>
	            {{ } }}
	        </div>
	    </script>
		<div class="searchContent">
				<div class="s_form">
					<div class="fl"  >
						<img src="../../image/robot/iuap_logo.png" height=40 class="fl" alt="" />
					</div>
					<input type="text" class="searchbox fl" id="searchbox" style="position: relative; padding:5px;" >
					<div class="fl searchButton" id="searchButton" style="">
						<p class="">
							search
						</p>
					</div>
				</div>

			</div>
		<div class="Hcontent" >
			<div class="robotPhoto">
				<img src="../../image/robot/robot.png"  width=40 height=45 alt="" />
			</div>
			<div class="robotContent">
				<div class="um-win" id="main">
					<div class="um-header">
						<h3 class="headSpan">我要提问</h3>
					</div>
					<div class="um-content p5" id="content">
						<div id="convo">
							<ul class="chat-thread" id="chat-thread">
								
							</ul>
							<div class="chat-tips-box">
								<span class="chat-tips">没有想要的，<span class="search-for-hr" onclick="goFeedback()">请点击我</span></span>
							</div>
						</div>

					</div>
					<div class="um-footer">
						<div class="chat-input-box">
							<img src="../../image/robot/speech.png" alt="" class="change-input-type" data-flag='speech'/>

							<div class="show-input">
								<input type="text" class="form-control chat-input" placeholder="亲,有什么想要问我的吗?"/>
								<button class="btn chat-send">
									发送
								</button>
							</div>
							<div class="show-speech none" onclick="speechToString()">
								点击 说话
							</div>

						</div>

					</div>
				</div>
			</div>

			
			<div class="searchArticle">
				<div class="searchResult">

				</div>
			</div>

		</div>
		<script id="list1" type="text/x-dot-template">
			<ul>
			{{ for (var i=0;i<it.length;i++ ){ }}
			<li class="pt20 clearfix pl20" >
			<a href="{{=it[i].url}}" class="title mb10" target="view_window">
			{{=it[i].title}}
			</a>
			{{if(it[i].descriptImg){}}
			<div class="clearfix IC">
			{{}else{}}
			<div class="clearfix">
			{{}}}
			<a class="fl descImg">
			<img src="{{=it[i].descriptImg}}" alt="" />
			</a>
			<div class="fl descCon">
			<p class="f12 d-des">{{=it[i].descript}}</p>
			<p class="f13 pt5 clearfix">
			<a class="fl d-url"  href="{{=it[i].url}}">{{=it[i].url}}</a>
			<span class="fr">{{=it[i].updateTime}}</span>
			</p>
			</div>
			</div>
			</li>
			{{ } }}
			</ul>
		</script>
		<script type="text/javascript" src="../../js/public/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" src="../../js/public/summer.js"></script>
		<script type="text/javascript" src="../../js/public/doT.min.js"></script>
		<script type="text/javascript" src="../../js/public/layer_mobile/layer.js"></script>
		<script type="text/javascript" src="./robot.js"></script>
		<script type="text/javascript" src="data.js"></script>
		<script>
			$('.robotPhoto').on('click', function(e) {
				//$("#main").removeClass('none');
				$(e.currentTarget).next().toggleClass('active').slideToggle();

			});

			$(function() {
				$("#searchButton").on("click", function() {
					var content = $('#searchbox').val();
					console.log(content);
					$.ajax({
						type : "get",
						dataType : "json",
						url2 : "http://172.27.35.3:8080/solr/mycore1/select",
						url : "http://127.0.0.1:8080/solr/mycore1/select",
						data : {
							indent : "on",
							q : !content ? "*:*" : content,
							wt : "json"
						},
						success : function(data) {
							//alert(1);
							alert(JSON.stringify(data));
							var arrText1 = doT.template($("#list1").text());
							$(".searchResult").html(arrText1(data.response.docs));

						},
						error : function(res) {
							var data = data_demo;
							var arrText1 = doT.template($("#list1").text());
							$(".searchResult").html(arrText1(data.response.docs));
						}
					});

				});
				$("#searchButton1").on("click", function() {
					var arrText1 = doT.template($("#list1").text());
					$(".searchResult").html(arrText1(data.response.docs));

				});
			});

		</script>
	</body>
</html>